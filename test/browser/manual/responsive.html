<!doctype html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge">
	<title>Responsive</title>
	<script type="text/javascript">
		isIE = isIE8 = isIE9 = isIE10 = false;
		isStandAlone = (window.parent === window.top);
		template = 'plain';
		//		if (typeof console === 'undefined') {
		//			console = {log: function (msg) {alert(msg)}};
		//		} 
	</script>
	<!--[if lt IE 8]>
	<script type="text/javascript">alert('this browser is not supported')</script><![endif]-->
	<!--[if IE 8]>
	<script type="text/javascript">isIE = isIE8 = true;</script><![endif]-->
	<!--[if IE 9]>
	<script type="text/javascript">isIE = isIE9 = true;</script><![endif]-->
	<!--[if gt IE 9]>
	<script type="text/javascript">isIE = isIE10 = true;</script><![endif]-->
	<style type="text/css">
		.opaque {
			opacity: 0;
		}

		.hidden {
			visibility: hidden;
		}

		.not-displayed {
			display: none;
		}
		
		.button {
			display: inline-block;
			border: 1px solid black;
		}
		.banner {
			zoom: 0.5;
		}
	</style>
</head>
<body>
	<h1>Responsive</h1>
	<script type="text/javascript">
		var adspaces = [54, 1, 7, 9, 10, 21, 5, 42, 6, 4, 45];
		var visibility = "opaque hidden not-displayed".split(' ');
		if (!window.ba_adspaces) {
			window.ba_adspaces = [];
		}

		for (var index = 0; index < adspaces.length; index++) {
			var id = adspaces[index]; 
			document.write('<a href="javascript:showAdspace(' + id + ');false" class="button">banner ' + id + '</a>');
		}
		for (var index = 0; index < adspaces.length; index++) {
			var id = adspaces[index];
			window.ba_adspaces.push({ 'id' : id, 'target' : 'banner-' + id });
			document.write('<div id="banner-' + id + '" class="banner ' + visibility[index%4] + '">banner ' + id + '</div>');
		}

		function showAdspace(id) {
			AdServ.$('#banner-'+id).className = 'banner';
		}
	</script>
 

	<script type="text/javascript">
		console.time("inline");
		console.time("script");
		console.time("ready");
		window.onload = function() {
			console.timeEnd("inline"); 
		}
	</script>
	<script type="text/javascript">
		(function() {
			var script = document.createElement("script");
			script.type = "text/javascript";
			script.async = true;
			script.src = "/base/build/AdServ.js";
			var callback = function() { 
				console.timeEnd("script");
				var conf = AdServ.loadAdspaces('/creatives', function(err, conf) {
					console.log("hey I'm done!");
				});
//				var conf = AdServ.load(window.ba_adspaces);
				console.log('conf', conf);
				console.log('adspaces', conf.adspaces);
				console.log('contexts', conf.contexts);
			};

			if (script.addEventListener) {
				script.addEventListener("load", callback, false);
			} else if (script.readyState) {
				script.onreadystatechange = function() {
					if (script.readyState == 'loaded') {
						callback();
					}
				};
			}

			var first = document.getElementsByTagName("script")[0];
			first.parentNode.insertBefore(script, first);
		})();
	</script>
</body>
</html> 